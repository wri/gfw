{"id": "897ecc76-2308-4c51-aeb3-495de0bdca79", "type": "dataset", "attributes": {"name": "Tree Cover Loss", "slug": "Tree-Cover-Loss-2017", "type": "tabular", "subtitle": null, "application": ["gfw"], "dataPath": null, "attributesPath": null, "connectorType": "rest", "provider": "gee", "userId": "59db4eace9c1380001d6e4c3", "connectorUrl": null, "tableName": "projects/wri-datalab/HansenComposite_17", "status": "saved", "published": true, "overwrite": false, "verified": false, "blockchain": {}, "subscribable": {}, "mainDateField": null, "env": "production", "geoInfo": false, "protected": true, "legend": {"date": [], "region": [], "country": [], "nested": []}, "clonedHost": {}, "errorMessage": "", "taskId": null, "updatedAt": "2018-12-13T04:01:45.924Z", "dataLastUpdated": null, "widgetRelevantProps": [], "layerRelevantProps": [], "layer": [{"id": "c3075c5a-5567-4b09-bc0d-96ed1673f8b6", "type": "layer", "attributes": {"name": "Tree cover loss", "slug": "Tree-Cover-Loss-2017", "dataset": "897ecc76-2308-4c51-aeb3-495de0bdca79", "description": "Tree Cover Loss", "application": ["gfw"], "iso": [], "provider": "leaflet", "userId": "59db4eace9c1380001d6e4c3", "default": true, "protected": true, "published": true, "env": "production", "layerConfig": {"body": {"format": "image/png", "maxzoom": 12, "metadata": "https://production-api.globalforestwatch.org/v1/gfw-metadata/tree_cover_loss", "minzoom": 2, "options": {"useCors": true}, "url": "https://storage.googleapis.com/wri-public/Hansen18/tiles/hansen_world/v1/tc{thresh}/{z}/{x}/{y}.png"}, "decode_config": [{"default": "2001-01-01", "key": "startDate", "required": true}, {"default": "2018-12-31", "key": "endDate", "required": true}], "params_config": [{"default": 12, "key": "dataMaxZoom", "required": true}, {"default": 30, "key": "thresh", "required": true}], "timeline_config": {"dateFormat": "YYYY", "interval": "years", "speed": 250, "step": 1}, "type": "tileLayer"}, "legendConfig": {"items": [{"dataMaxZoom": 12, "threshold": 30, "color": "#DC6C9A", "name": "Tree cover loss", "source": "(annual, 30m, global, Hansen/UMD/Google/USGS/NASA)", "notes": ["Displaying loss with {thresh} canopy density.", "Tree cover loss is not always deforestation."]}], "type": "basic"}, "interactionConfig": {}, "applicationConfig": {"active": true, "analysisConfig": [{"key": "loss", "service": "umd-loss-gain", "type": "geostore", "unit": "ha", "version": "v1"}, {"key": "totals", "service": "umd-loss-gain", "subKey": "loss", "type": "admin", "unit": "ha", "version": "v3"}], "default": true, "global": true, "metadata": "tree_cover_loss", "subscriptionKey": "umd-loss-gain"}, "staticImageConfig": {}, "updatedAt": "2019-04-24T17:43:27.367Z"}}, {"id": "dcb082a9-6fd7-4564-9110-ddf5d3d6681e", "type": "layer", "attributes": {"name": "Tree cover loss by dominant driver (DEPRECIATED)", "slug": "Loss-by-TSC-driver", "dataset": "897ecc76-2308-4c51-aeb3-495de0bdca79", "description": "Shows deforestation categorised by driver.", "application": ["gfw"], "iso": [], "provider": "leaflet", "userId": "59db4eace9c1380001d6e4c3", "default": false, "protected": true, "published": false, "env": "production", "layerConfig": {"body": {"format": "image/png", "maxzoom": 12, "minzoom": 2, "options": {"useCors": true}, "url": "https://storage.googleapis.com/wri-public/lossyear_classification_map/2017/gfw/tiles/hansen_world/v2/tc{thresh}/{z}/{x}/{y}.png"}, "decode_config": [{"default": "2001-01-01", "key": "startDate", "required": true}, {"default": "2015-12-31", "key": "endDate", "required": true}], "params_config": [{"default": 4, "key": "dataMaxZoom", "required": true}, {"default": 30, "key": "thresh", "required": true}], "service": "leaflet", "timeline_config": {"dateFormat": "YYYY", "interval": "years", "speed": 250, "step": 1}, "type": "tileLayer"}, "legendConfig": {"type": "basic", "items": [{"color": "#F41D36", "name": "Commodity driven deforestation"}, {"color": "#F4DB5A", "name": "Shifting agriculture"}, {"color": "#2FBF71", "name": "Forestry"}, {"color": "#ad6824", "name": "Wildfire"}, {"color": "#B235CC", "name": "Urbanization"}]}, "interactionConfig": {}, "applicationConfig": {"active": true, "analysisConfig": [{"key": "loss", "service": "umd-loss-gain", "type": "geostore", "unit": "ha", "version": "v1"}, {"key": "total", "service": "umd-loss-gain", "subKey": "loss", "type": "admin", "unit": "ha", "version": "v3"}], "default": false, "global": true, "metadata": "tsc_drivers", "selectorConfig": {"label": "Loss by Driver", "position": 1, "value": "tscLoss"}, "subscriptionKey": "umd-loss-gain"}, "staticImageConfig": {}, "updatedAt": "2019-03-08T13:19:23.410Z"}}], "metadata": [{"id": "5b643872c31667001159baf7", "type": "metadata", "attributes": {"dataset": "897ecc76-2308-4c51-aeb3-495de0bdca79", "application": "gfw", "resource": {"id": "897ecc76-2308-4c51-aeb3-495de0bdca79", "type": "dataset"}, "language": "en", "info": {"citation": "annual, 30m, global, Hansen/UMD/Google/USGS/NASA", "color": "#fe6598", "description": "Identifies areas of gross tree cover loss.", "isLossLayer": true, "name": "Tree cover loss"}, "createdAt": "2018-08-03T11:11:46.931Z", "updatedAt": "2018-12-04T11:27:28.044Z", "status": "published"}}], "vocabulary": [{"id": "897ecc76-2308-4c51-aeb3-495de0bdca79", "type": "vocabulary", "attributes": {"resource": {"id": "897ecc76-2308-4c51-aeb3-495de0bdca79", "type": "dataset"}, "tags": ["forestChange", "treeCoverChange"], "name": "categoryTab", "application": "gfw"}}], "widget": [{"id": null, "type": "widget", "attributes": {"id": "070dd8b2-aa32-42db-ba50-064246013163", "type": "widget", "attributes": {"name": "Tree Cover Loss Widget", "dataset": "897ecc76-2308-4c51-aeb3-495de0bdca79", "slug": "Tree-Cover-Loss-Widget", "userId": "5b3a57251b3a8854b6338faa", "description": "Widget used in mapbuilder to present the results of annual tree cover loss analysis. In order to use this widget the application must add a tree cover desnity treshold, period for anlaysis, and geostore ID through the analysis url.", "application": ["forest-atlas"], "verified": false, "default": false, "protected": false, "defaultEditableWidget": false, "published": true, "freeze": false, "env": "production", "widgetConfig": {"schema": "https://vega.github.io/schema/vega/v3.0.json", "width": 210, "height": 320, "padding": 5, "data": [{"name": "table", "format": {"property": "data.attributes.loss"}, "url": "https://production-api.globalforestwatch.org/v1/umd-loss-gain?aggregate_values=false", "transform": [{"type": "fold", "fields": ["2001", "2002", "2003", "2004", "2005", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021"]}, {"type": "filter", "expr": "isNumber(datum.value)"}, {"type": "project", "fields": ["value", "key"], "as": ["loss", "year"]}]}], "scales": [{"name": "y", "type": "band", "domain": {"data": "table", "field": "year"}, "range": "height", "padding": 0.3}, {"name": "x", "type": "linear", "domain": {"data": "table", "field": "loss"}, "range": "width", "round": true, "zero": true, "nice": true, "format": ""}], "axes": [{"title": "Year", "orient": "left", "scale": "y", "tickSize": 0, "labelPadding": 4, "zindex": 1}, {"title": "Hectares (k = 1,000)", "orient": "bottom", "scale": "x", "labelOverlap": "greedy", "format": ",.1s", "tickCount": 5}], "marks": [{"name": "bars", "from": {"data": "table"}, "type": "rect", "encode": {"enter": {"y": {"scale": "y", "field": "year"}, "height": {"scale": "y", "band": 1}, "x": {"scale": "x", "field": "loss"}, "x2": {"scale": "x", "value": 0}, "fill": {"value": "#DC6699"}, "tooltip": {"signal": "datum.year + ' : ' + format(datum.loss, ' ,.0f') + ' ha'"}}, "hover": {"opacity": {"value": 0.6}}, "update": {"opacity": {"value": 0.9}}}}]}, "template": false, "createdAt": "2018-11-05T18:28:33.941Z", "updatedAt": "2018-11-05T18:28:33.941Z"}}}, {"id": null, "type": "widget", "attributes": {"id": "7abb8bc5-5b41-41ab-921e-5754baab9cdb", "type": "widget", "attributes": {"name": "Tree Cover Loss by Land Cover Class Widget", "dataset": "897ecc76-2308-4c51-aeb3-495de0bdca79", "slug": "Tree-Cover-Loss-by-Land-Cover-Class-Widget", "userId": "5b3a57251b3a8854b6338faa", "description": "Widget used in mapbuilder to present annual tree cover loss analysis, disagregated by land cover class.Land cover data is based on GFW ESA landcover map. In order to use this widget the application must add a tree cover desnity treshold, period for anlaysis, and geostore ID through the analysis url.", "application": ["forest-atlas"], "verified": false, "default": false, "protected": false, "defaultEditableWidget": false, "published": true, "freeze": false, "env": "production", "widgetConfig": {"legends": [{"labelFontSize": 10, "titleFontSize": 11, "direction": "vertical", "columnPadding": 50, "columns": 2, "orient": "bottom", "fill": "color", "titleBaseline": "top", "title": "Tree Cover Loss by Land Cover"}], "marks": [{"encode": {"hover": {"fillOpacity": {"value": 0.5}}, "update": {"fillOpacity": {"value": 1}}, "enter": {"tooltip": {"signal": "datum.year + ' loss in ' + datum.className + ' areas: ' + format(datum.loss, ',.0f') + '  ha'"}, "fill": {"field": "className", "scale": "color"}, "x2": {"field": "y1", "scale": "x"}, "x": {"field": "y0", "scale": "x"}, "height": {"offset": -1, "band": 1, "scale": "y"}, "y": {"field": "year", "scale": "y"}}}, "from": {"data": "table_viz"}, "type": "rect"}], "axes": [{"tickCount": 4, "format": ",.1s", "labelOverlap": "greedy", "scale": "x", "orient": "bottom", "title": "Hectares (k = 1,000)"}, {"zindex": 1, "scale": "y", "orient": "left", "title": "Year"}], "scales": [{"domain": {"field": "year", "data": "table_viz"}, "padding": 0.3, "range": "height", "type": "band", "name": "y"}, {"domain": {"field": "y1", "data": "table_viz"}, "zero": true, "nice": true, "range": "width", "type": "linear", "name": "x"}, {"domain": {"field": "className", "data": "table_viz"}, "range": {"field": "hex", "data": "table_viz"}, "type": "ordinal", "name": "color"}], "data": [{"transform": [{"fields": ["result"], "type": "flatten"}, {"expr": "(datum.result.year)", "as": "year", "type": "formula"}, {"expr": "(datum.result.result)", "as": "loss", "type": "formula"}], "url": "https://production-api.globalforestwatch.org/v1/loss-by-landcover?", "format": {"property": "data.attributes.histogram"}, "name": "data"}, {"values": [{"hex": "#d2a965", "classVal": "1"}, {"hex": "#157764", "classVal": "2"}, {"hex": "#ccdb98", "classVal": "3"}, {"hex": "#596b2c", "classVal": "4"}, {"hex": "#E9462B", "classVal": "5"}, {"hex": "#2789d4", "classVal": "6"}, {"hex": "#D5C998", "classVal": "7"}, {"hex": "#f6f0ea", "classVal": "8"}, {"hex": "#a3dcff", "classVal": "9"}, {"hex": "#ffffff", "classVal": "10"}], "name": "lookup"}, {"transform": [{"groupby": ["year"], "as": ["total_loss"], "ops": ["sum"], "fields": ["loss"], "type": "aggregate"}, {"as": "Total loss", "expr": "round(datum.total_loss)", "type": "formula"}], "source": "data", "name": "Annual_Loss"}, {"transform": [{"values": ["hex"], "fields": ["classVal"], "key": "classVal", "from": "lookup", "type": "lookup"}, {"as": ["className", "classVal", "loss", "year", "hex"], "fields": ["className", "classVal", "loss", "year", "hex"], "type": "project"}, {"sort": {"order": "descending", "field": "className"}, "field": "loss", "groupby": ["year"], "type": "stack"}, {"expr": "datum.loss != 0", "type": "filter"}], "source": "data", "name": "table_viz"}, {"transform": [{"as": "loss", "expr": "round(datum.loss)", "type": "formula"}, {"groupby": ["year"], "value": "loss", "field": "className", "type": "pivot"}, {"values": ["Total loss"], "fields": ["year"], "key": "year", "from": "Annual_Loss", "type": "lookup"}], "source": "table_viz", "name": "table"}], "padding": 5, "width": 210, "height": 320, "schema": "https://vega.github.io/schema/vega/v4.json"}, "template": false, "createdAt": "2018-11-05T21:55:59.948Z", "updatedAt": "2018-11-05T21:55:59.948Z"}}}]}}